
{% extends "admin/base_site.html" %}
{% load humanize %}
{% block content %}
<h1>Customer Behaviour &amp; Forecast</h1>

<h2 class="mt-4">Top Products (last 90 days)</h2>
<table class="table table-striped">
  <thead>
    <tr><th>#</th><th>Product</th><th>Units Sold</th><th>Revenue</th></tr>
  </thead>
  <tbody>
    {% for row in top_products %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>{{ row.product__name }}</td>
      <td>{{ row.total_qty|intcomma }}</td>
      <td>${{ row.total_revenue|floatformat:2 }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="4" class="text-muted">No sales data yet.</td></tr>
    {% endfor %}
  </tbody>
</table>

<p class="text-muted">Forecasts use a simple moving‑average model (last 3 months × 1.1).</p>
{% endblock %}
